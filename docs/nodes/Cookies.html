<html lang="en">
<head>
<title>Cookies - Artanis web-framework Manual</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Artanis web-framework Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="prev" href="Sessions.html#Sessions" title="Sessions">
<link rel="next" href="Authentication.html#Authentication" title="Authentication">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Cookies"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Authentication.html#Authentication">Authentication</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Sessions.html#Sessions">Sessions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="index.html#Top">Top</a>
<hr>
</div>

<h2 class="chapter">12 Cookies</h2>

<p>You have to use <tt>#:session #t</tt> while you defining URL rule handler.
<pre class="example">     (get "/cookie-test" #:cookies mode
       (lambda (rc) ...))
</pre>
   <p><strong>mode</strong> could be:
     <ul>
<li>('names names <small class="dots">...</small>) specifies the name list of the cookies. 
<li>('custom (names <small class="dots">...</small>) maker setter getter modifier) specify a more complicated customized cookie handers. 
</ul>

   <p>And the APIs:
<pre class="example">     (:cookies-set! rc cookie-name key val)
     
     (:cookies-ref rc cookie-name key)
     
     (:cookies-setattr! rc cookie-name #:expir #f #:domain #f #:path #f #:secure #f #:http-only #f)
     
     (:cookies-remove! rc key) ; remove cookie from client
     
     (:cookies-update! rc) ; cookies operations won't work unless you update it
</pre>
   <p><strong>NOTE</strong>: You don't have to call <tt>:cookies-update!</tt> yourself, since it'll be called automatically by the hook before response.

   <p>For example:
<pre class="example">     (get "/cookie" #:cookies '(names cc)
       (lambda (rc)
         (:cookies-set! rc 'cc "sid" "123321")
         "ok"))
     
     (get "/cookie/:expires" #:cookies '(names cc)
       (lambda (rc)
         (:cookies-set! rc 'cc "sid" "123321")
         (:cookies-setattr! rc 'cc #:expir (string-&gt;number (params rc "expires")))
         "ok"))
</pre>
   <p>Now you may use this command in the console to see the result:
<pre class="example">     curl --head localhost:3000/cookie
     # and
     curl --head localhost:3000/cookie/120
</pre>
   </body></html>

